<html xmlns:p="tapestry:parameter"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
   
	<t:border xmlns:t="http://tapestry.apache.org/schema/tapestry_5_0_0.xsd">
	



	<h1>Añadir usuarios por fichero </h1>
		
		<t:form t:id="uploadForm">
			<t:errors/>
			<input t:type="upload" t:id="file" t:value="file" validate="required"/><br/>
			<input type="submit" value="Upload"/>		
		</t:form>
			
			
		<t:zone t:id="gridZone" id="gridZone">
			<t:if test="fileupload">
				<t:grid source="persons" row="person" add="ID,Edit,Avalible,Add" exclude="lastLog,regDate,plainpass" reorder="ID,Avalible" rowsperpage="10" inplace="true">
					<p:idcell>
						${person.id }
					</p:idcell>
					<p:avaliblecell>
						${avalible }
					</p:avaliblecell>
					<p:emailcell>
						${person.email }
						<t:if test="!okemail"><br/><font color="red">Email no valido</font> </t:if>
					</p:emailcell>
					<p:passwordcell>
						${person.password }
						<t:if test="!okpass"><br/><font color="red">minimo 6 caracteres</font> </t:if>
					</p:passwordcell>
					<p:firstnamecell>
						${person.firstname}
						<t:if test="!okfirstname"><br/><font color="red">Obligatorio</font></t:if>
					</p:firstnamecell>
					<p:lastnamecell>
						${person.lastname }
						<t:if test="!oklastname"><br/><font color="red">Obligatorio</font></t:if>
					</p:lastnamecell>
					<p:editcell>
						<t:if test="!editing">
							<t:actionlink t:id="editBut" context="person.id" zone="^"><button>Edit</button></t:actionlink>
						</t:if>
					</p:editcell>  
					<p:addcell>
						<t:if test="avalible">
							<t:if test="complete">
								<t:actionlink t:id="addbut" context="person.id" zone="^"><button>Add</button></t:actionlink>
							</t:if>
						</t:if>
					</p:addcell>        
				</t:grid>
				<t:actionlink t:id="endBut"><button>FINISH</button></t:actionlink>
				<t:actionlink t:id="addRowBut" zone="^"><button>AddRow</button></t:actionlink>
				<t:actionlink t:id="addavaliblesBut" zone="^"><button>AddAvalibles</button></t:actionlink>
			</t:if>
		</t:zone>
		<t:zone t:id="editZone" id="editZone">
			<t:if test="editing">
				<t:form t:id="editForm" zone="^">
					<table>
						<tr>
							<td>
								<label>Email</label>
							</td>
							<td>
								<t:textfield t:id="emailfield" t:value="profile.email"/>
							</td>
						</tr>
						<tr>
							<td>
								<label>Password</label>
							</td>
							<td>
								<t:textfield t:id="passfield" t:value="profile.password" validate="required,minLength=6"/>
							</td>
						</tr>
						<tr>
							<td>
								<label>First Name</label>
							</td>
							<td>
								<t:textfield t:id="firstnamefield" t:value="profile.firstName"/>
							</td>
						</tr>
						<tr>
							<td>
								<label>Last Name</label>
							</td>
							<td>
								<t:textfield t:id="lastnamefield" t:value="profile.lastName"/>
							</td>
						</tr>
						<tr>
							<td>
								<label>University</label>
							</td>
							<td>
								<t:textfield t:id="universityfield" t:value="profile.university"/>
							</td>
						</tr>
						<tr>
							<td>
								<label>City</label>
							</td>
							<td>
								<t:textfield t:id="cityfield" t:value="profile.city"/>
							</td>
						</tr>
						<tr>
							<td>
								<label>Country</label>
							</td>
							<td>
								<t:textfield t:id="countryfield" t:value="profile.country"/>
							</td>
						</tr>
						<tr>
							<td>
								<label><input t:type="submit" t:id="save" value="Save"/></label>
							</td>
							<td>
								<input t:type="submit" t:id="cancel" value="Cancel" t:mode="cancel"/>
							</td>
						</tr>
					</table>
					
				</t:form>
			</t:if>
		</t:zone>
			
	</t:border>
	
		
			
	


</html>
