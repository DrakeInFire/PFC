<html xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd" xmlns:p="tapestry:parameter"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
     <head><title>${message:page-title}</title></head>
   
	<t:border><div id="userlistDiv">
	
		<h1>${message:company-users}</h1><hr/>
		<!--  
	  	  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		 /////////////////////////////////////////////////// GRID ZONE //////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 		-->
		
		<t:zone t:id="userGridZone" id="userGridZone" t:update="show">	
			<t:if test="!showSure">
				<t:grid source="users" row="user" add="Edit,Delete,makeOwner" exclude="password,owner,lastlog">
					<p:deleteCell>
						<t:if test="!editing">
							<t:if test="!owner">
								<t:actionlink t:id="deleteuser" context="user.email" zone="^"><button>${message:delete-but}</button></t:actionlink>
							</t:if>
						</t:if>
					</p:deleteCell>
					<p:editCell>
						<t:if test="!editing">
							<t:if test="!owner">
								<t:actionlink t:id="editbut" context="user.id" zone="^"><button>${message:edit-but}</button></t:actionlink>
							</t:if>
						</t:if>
					</p:editCell>
					<p:makeOwnercell>
						<t:if test="!editing">
							<t:if test="!owner">
								<t:actionlink t:id="makeOwnerBut" context="user.id" zone="^"><button>${message:makeowner-but}</button></t:actionlink>
							</t:if>
						</t:if>
					</p:makeOwnercell>
				</t:grid>
			</t:if>
		</t:zone>
		
			<!--  
	  	  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		 /////////////////////////////////////////////////// AREUSURE ZONE //////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 		-->	
		
		<t:zone t:id="areuSureZone" id="areuSureZone" t:update="show">
			<t:if test="showSure">
				
				${message:are-u-sure}<b>${toCheck.email }</b>${message:owner-of}<b>${companyName }</b><br/>
				<t:actionlink t:id="successChangeOwnerBut" t:zone="^"><button>${message:yes-but}</button></t:actionlink>
				<t:actionlink t:id="cancelChangeOwnerBut" t:zone="^"><button>${message:not-but}</button></t:actionlink>
			</t:if>
		</t:zone>
		<!--  
	  	  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		 /////////////////////////////////////////////////// EDIT ZONE //////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 		-->		

		<t:zone t:id="editZone" id="editZone" t:update="show">
			<t:if test="editing">
				<t:form t:id="editForm" zone="^">
					<table>
						<tr>
							<td>
								<t:label for="emailfield"/>
							</td>
							<td>
								<t:textfield t:id="emailfield" t:value="editprof.email"/>
							</td>
							<td>
							<t:if test="nonavalible">
								${message:non-available}
							</t:if>
						</td>
						</tr>
						<tr>
						<td>
							<t:label for="adminbox"/>
						</td>
						<td>
							<t:checkbox t:id="adminbox" t:value="editprof.admin"/>
						</td>
					</tr>
					<tr>
						<td>
							<t:label for="makerbox"/>
						</td>
						<td>
							<t:checkbox t:id="makerbox" t:value="editprof.maker"/>
						</td>
					</tr>
					<tr>
						<td>
							<t:label for="firstnamefield"/>
						</td>
						<td>
							<t:textfield t:id="firstnamefield" t:value="editprof.firstname"/>
						</td>
					</tr>
					<tr>
						<td>
							<t:label for="lastnamefield"/>
						</td>
						<td>
							<t:textfield t:id="lastnamefield" t:value="editprof.lastname"/>
						</td>
					</tr>
					<tr>
						<td>
							<t:label for="universityfield"/>
						</td>
						<td>
							<t:textfield t:id="universityfield" t:value="editprof.university"/>
						</td>
					</tr>
					<tr>
						<td>
							<t:label for="cityfield"/>
						</td>
						<td>
							<t:textfield t:id="cityfield" t:value="editprof.city"/>
						</td>
					</tr>
					<tr>
						<td>
							<t:label for="countryfield"/>
						</td>
						<td>
							<t:textfield t:id="countryfield" t:value="editprof.country"/>
						</td>
					</tr>
					<tr>
						<td>
							<label><input t:type="submit" t:id="save" value="${message:save-but}"/></label>
						</td>
						<td>
							<input t:type="submit" t:id="cancel" value="${message:cancel-but}" t:mode="cancel"/>
						</td>
					</tr>
					</table>
				</t:form>
			</t:if>
		</t:zone>	
	
	</div></t:border>
</html>
